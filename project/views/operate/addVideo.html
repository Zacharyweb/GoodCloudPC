<!DOCTYPE html>
<html lang="en">
<head>
    <title>好云商-后台管理</title>
    @@include("shared/global-meta.html")
    <!-- 引入全局样式 -->
    <!-- 全局样式 -->
    @@include("shared/global-import-css.html")
    <!-- 引入全局插件样式 -->
    <!-- 全局插件样式 -->
    @@include("shared/global-import-plugins-css.html")
    <!-- 全局主题样式 -->
    <link rel="stylesheet" href="../../plugin/pager/css/pager.css">
    <link rel="stylesheet" href="../../plugin/cropper/cropper.min.css">
    <link rel="stylesheet" href="../../css/bulidingCity/managementApp.css">
</head>
<body class="page-header-fixed page-sidebar-closed-hide-logo page-content-white">
<div class="page-wrapper">
    <!-- 顶部Bar开始 -->
    @@include("shared/header.html")
    <!-- 顶部Bar结束 -->
    <div class="clearfix"></div>
    <!-- 页面中间部分内容开始 -->
    <div class="page-container">
        <!-- 侧边栏开始 -->
        @@include("shared/operatesliderbar.html")
        <!-- 侧边栏结束 -->
        <!-- 页面主内容开始 -->
        <div class="page-content-wrapper">
            <div class="page-content">
                <div class="page-bar no-border">
                    <h1 class="page-title bold">范例短视频</h1>
                </div>

                <div class="row">
                    <div class="modal-header">
                        <h3 class="bold" style="text-align: center">添加范例短视频</h3>
                    </div>
                    <form id="galleryContainer">
                        <div class="form-group brand-msg">
                            <span class="width">
                                <span class="required" aria-required="true"> *</span>
                                <span class="span-label no-required">范例短视频：</span>
                            </span>
                            <div class="logo-img-wrapper canvasBrother">
                                <input type="hidden" class="inputImg1" name="videoSrc">
                                <i class="brand-logo-img1 icon iconfont icon-add imgIcon1" style="position: absolute; border: none; top: 0px; left: -63px;display: none;"></i>
                                <img class="brand-logo-img1 bigImg" src="" alt=""
                                     style="display: inline-block; width: 120px;height: 120px;">
                            </div>
                            <div id="canvas" class="canvasCss" style="display: none;">
                                <canvas id="myCanvas" width="118px" height="118px">
                                    您的浏览器不支持canvas标签。
                                </canvas>
                                <span class="percent"></span>
                            </div>
                            <span class="red Verification1">请上传范例短视频</span>
                        </div>
                        <div class="form-group brand-msg">
                            <span class="width">
                                <span class="required" aria-required="true"> *</span>
                                <span class="span-label no-required">视频封面：</span>
                            </span>
                            <div class="logo-img-wrapper canvasBrother" style="display: inline-block; width: 120px;height: 120px;">
                                <input type="hidden" class="inputImg2" name="coverImg">
                                <i class="brand-logo-img2 icon iconfont icon-add imgIcon1" style="position: absolute; border: none; top: 0px; left: -63px;display: none;"></i>
                                <img class="brand-logo-img2 bigImg" src="" alt=""
                                     style="display: inline-block; width: 120px;height: 120px;">
                            </div>
                            <div id="canvas1" class="canvasCss" style="display: none;">
                                <canvas id="myCanvas1" width="118px" height="118px">
                                    您的浏览器不支持canvas标签。
                                </canvas>
                                <span class="percent"></span>
                            </div>
                            <span class="red Verification2">请上传视频封面</span>
                        </div>
                        <div class="form-group brand-msg" id="smallImg">
                            <span class="width">
                               <span class="required" aria-required="true"> *&nbsp;</span>
                                <span class="span-label no-required">发布人头像：</span>
                            </span>
                            <div class="logo-img-wrapper canvasBrother" style="display: inline-block; width: 120px;height: 120px;">
                                <input type="hidden" class="inputImg3" name="demoHeaderImg">
                                <i class="brand-logo-img3 icon iconfont icon-add imgIcon1" style="position: absolute; border: none; top: 0px; left: -63px;display: none;"></i>
                                <img class="brand-logo-img3" src="" alt=""
                                     style="display: inline-block; width: 120px;height: 120px;">
                            </div>
                            <div id="canvas2" class="canvasCss" style="display: none;">
                                <canvas id="myCanvas2" width="118px" height="118px">
                                    您的浏览器不支持canvas标签。
                                </canvas>
                                <span class="percent"></span>
                            </div>
                            <span class="red Verification3">请上传发布人头像</span>
                        </div>
                        <div class="form-group brand-msg">
                            <span class="width">
                                <span class="required" aria-required="true"> *&nbsp;</span>
                                <span class="span-label no-required">选择类目：</span>
                            </span>
                            <button id="chooseClass" class="btn gray btn-outline" type="button" data-toggle="modal" href="#selectCategory">选择类目</button>
                            <div id="leiMu" style="display:inline-block;">

                            </div>
                            <span class="red Verification4">请选择类目</span>
                        </div>
                        <div class="form-group brand-msg" >
                            <span class="width">
                                <span class="required" aria-required="true"> *&nbsp;</span>
                                <span class="span-label no-required">选择标签：</span>
                            </span>
                                <button id="chooseTags" class="btn gray btn-outline" data-toggle="modal" type="button" href="#selectTag">选择标签</button>
                            <div id="biaoQian" style="display:inline-block;">

                            </div>
                            <span class="red Verification5">请选择标签</span>
                        </div>
                        <div class="form-group brand-msg">
                            <span class="width">
                                <span class="required" aria-required="true"> *&nbsp;</span>
                                <span class="span-label no-required">品牌名称：</span>
                            </span>
                            <input class="form-control input-sm brandName isWidth" name="brandName" maxlength="15" placeholder="请输入品牌名称，最多输入15字">
                            <span class="red Verification6">请输入品牌名称</span>
                        </div>
                        <div class="form-group brand-msg">
                            <span class="width">
                                <span class="required" aria-required="true"> *&nbsp;</span>
                                <span class="span-label no-required">浏览次数：</span>
                            </span>
                            <input class="form-control input-sm viewCount isWidth" name="viewCount" maxlength="15" onkeyup="(this.v=function(){this.value=this.value.replace(/[^0-9-]+/,'');}).call(this)" onblur="this.v();" placeholder="请输入数字">
                            <span class="red Verification7">请输入浏览次数</span>
                            <span class="red Verification8">请输入的次数大于0</span>
                        </div>
                        <div class="form-group brand-msg">
                            <span class="span-label no-required width">&nbsp;&nbsp;&nbsp;视频标题：</span>
                            <input class="form-control input-sm isWidth" id="title" name="title" maxlength="30" placeholder="请输入视频标题,最多输入30字">
                            <span class="red">请输入视频标题</span>
                        </div>
                    </form>
                    <div class="portlet-title" style="padding: 30px 0;">
                        <a type="button" class="btn dark btn-outline" id="back" style="margin: 0 20px 0 365px;">返回</a>
                        <a type="button" class="btn green " id="add">保存</a>
                         <a type="button" class="btn green" id="edit">保存</a>
                    </div>
                </div>
            </div>
        </div>
        <!-- 页面主内容结束 -->
    </div>
    <!-- 页面中间内容部分结束 -->
    <!-- 页脚开始 -->
    @@include("shared/footer.html")
    <!-- 页脚结束 -->
</div>
<!-- 页面内容结束 -->
<!--选择类目-->
<div class="modal fade bs-modal-lg" id="selectCategory" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title bold">选择类目</h4>
            </div>
            <div class="modal-body" style="min-height:400px;_height:400px;max-height:500px;overflow: auto;">
                <div class="portlet-body" style="margin-bottom: 70px;">
                    <table id="cateList" class="table table-striped table-bordered table-hover table-header-fixed">
                        <thead>
                        <tr class="table-header">
                            <th>类目名称</th>
                            <th>操作</th>
                        </tr>
                        </thead>
                        <tbody>

                        </tbody>
                    </table>
                </div>
                <div class="row" style="position: absolute;bottom:0;right: 30px;">
                    <span id="pager1" class="pager pull-right">
                    </span>
                </div>
            </div>
            <div class="modal-footer">

            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!--选择类目内容-->
<script type="text/html" id="tages">
    {{each cateList as value i}}
    <tr>
        <td>{{value.name}}</td>
        <td><a data-id="{{value.id}}" data-toggle="modal" href="#confirmModal1" class="choose1">选择</a></td>
    </tr>
    {{/each}}
</script>
<!--确定选择类目-->
<div class="modal fade bs-modal-sm" id="confirmModal1" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-body"> 确定选择吗？ </div>
            <div class="modal-footer no-border">
                <button type="button" class="btn green confirmChoose1">确定</button>
                <button type="button" class="btn dark btn-outline deleteCancel" data-dismiss="modal">取消</button>
            </div>
        </div>
    </div>
</div>
<!--选择标签-->
<div class="modal fade bs-modal-lg" id="selectTag" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title bold">选择标签</h4>
            </div>
            <div class="modal-body" style="min-height:400px;_height:400px;max-height:500px;overflow: auto;">
                <div style="border:1px dotted #ccc;padding:10px;">
                    <button type="button" class="btn green btn-outline pull-left" id="select" style="margin-right: 20px;">全选</button>
                    <button type="button" class="btn green btn-outline pull-left" id="noSelect" style="margin-right: 20px;">取消全选</button>
                    <button type="button" class="btn dark btn-outline confirm" data-toggle="modal"  href="#confirmModal2" disabled>确认选择</button>
                </div>
                <div class="portlet-body">
                    <table class="table table-striped table-bordered table-hover table-header-fixed" id="sample">
                        <thead>
                        <tr class="table-header">
                            <th>#</th>
                            <th>标签名称</th>
                        </tr>
                        </thead>
                        <tbody>

                        </tbody>
                    </table>
                <div class="row" style="position: absolute;bottom:0;right: 30px;">
                    <span id="pager2" class="pager pull-right">
                    </span>
                </div>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
</div>
<!--选择标签内容-->
<script type="text/html" id="isContainer">
    {{each tagsList as value i}}
    <tr>
        <td>
            <label class="mt-checkbox mt-checkbox-outline">
                <input data-id="{{value.id}}" type="checkbox" value="1">
                <span></span>
            </label>
        </td>
        <td>{{value.name}}</td>
    </tr>
    {{/each}}
</script>
<!--确定选择标签-->
<div class="modal fade bs-modal-sm" id="confirmModal2" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-body"> 确定选择吗？ </div>
            <div class="modal-footer no-border">
                <button type="button" class="btn green confirmChoose2">确定</button>
                <button type="button" class="btn dark btn-outline deleteCancel" data-dismiss="modal">取消</button>
            </div>
        </div>
    </div>
</div>
<!-- 载入全局依赖js -->
<script src="../../assets/global/plugins/jquery.min.js" type="text/javascript"></script>
<script src="../../assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="../../assets/global/scripts/app.min.js" type="text/javascript"></script>
<script src="../../assets/global/plugins/js.cookie.min.js" type="text/javascript"></script>
<script src="../../assets/layouts/layout/scripts/layout.min.js" type="text/javascript"></script>
<script src="../../plugin/artTemplate/template.js"></script>
<script src="../../plugin/draggabilly/draggabilly.pkgd.min.js"></script>
<script src="../../js/config.js"></script>
<script src="../../js/utils.js"></script>
<script src="../../js/jquery.extend.js"></script>
<script src="../../plugin/toastr/toastr.js"></script>
<script src="../../plugin/jquery-validate/jquery.validate.js"></script>
<script src="../../js/common.js"></script>

<script src="../../js/decorationCollection/editArticle.js"></script>
<!-- 本页面依赖组件初始化 -->
<script src="../../plugin/pager/jquery-pager.js"></script>
<!-- 上传图片脚本 -->
<script src="../../plugin/qCloud/cos-js-sdk-v4.js"></script>
<script src="../../plugin/qCloud/crypto.js"></script>
<script src="../../plugin/qCloud/qCloud.js"></script>
<script src="../../plugin/upload/cropper.js"></script>
<script src="../../plugin/upload/qcloud-cropper.js"></script>

    <script src="../../js/videoShort/addVideo.js"></script>
<script>
    var addVideo =new AddVideo();
    addVideo.create();
    //范例短视频
    $(".brand-logo-img1").click(function(){
        $.imgUpload({
            callbackEle:"[name='brandImg'],.brand-logo-img1",
            successCallback:function(path){
                $("i.brand-logo-img1").css('display','none');
                $('.inputImg1').attr("path",path);
                $(".brand-logo-img1").attr('src',"http://image.yetong.org//web/1495612550051.png?");
            },
            progressCallBack:function(curr){
                if(curr>0){
                    $("#canvas").css('display','block');
                }
                var canvas = document.getElementById("myCanvas");
                if(canvas.getContext){
                    var ctx = canvas.getContext("2d");
                    ctx.beginPath();
                    ctx.lineWidth = 5;
                    ctx.lineWidth = 5;//线条宽度
                    var circle = {
                        x : 60,    //圆心的x轴坐标值
                        y : 60,    //圆心的y轴坐标值
                        r : 30      //圆的半径
                    };
                    ctx.strokeStyle ='#32c5d2';
                    ctx.arc(circle.x,circle.y,circle.r,0,2*curr*Math.PI,false);
                    ctx.stroke();
                    var percent = (curr.toFixed(2)*100).toFixed(0);
                    $(".percent").html(""+percent+"%");
                    if(curr == 1){
                        $("#canvas").css('display','none');
                    }
                }
            },
            otherFile:'video',
            cropper:false,
            cropperOpts: {
                aspectRatio: 1/1,//截图框的比例
                zoomable:false, //禁用鼠标滚轮放大缩小
                viewMode:1 //截图框只能在图片区域内移动
            }
        },cos)
    });
    //视频封面
    $(".brand-logo-img2").click(function(){
        $.imgUpload({
            callbackEle:"[name='brandImg'],.brand-logo-img2",
            successCallback:function(path){
                $("i.brand-logo-img2").css('display','none');
                $('.inputImg2').attr("path", path);
            },
            progressCallBack:function(curr){
                if(curr>0){
                    $("#canvas1").css('display','block');
                }
                var canvas = document.getElementById("myCanvas1");
                if(canvas.getContext){
                    var ctx = canvas.getContext("2d");
                    ctx.beginPath();
                    ctx.lineWidth = 5;
                    ctx.lineWidth = 5;//线条宽度
                    var circle = {
                        x : 60,    //圆心的x轴坐标值
                        y : 60,    //圆心的y轴坐标值
                        r : 30      //圆的半径
                    };
                    ctx.strokeStyle ='#32c5d2';
                    ctx.arc(circle.x,circle.y,circle.r,0,2*curr*Math.PI,false);
                    ctx.stroke();
                    var percent = (curr.toFixed(2)*100).toFixed(0);
                    $(".percent").html(""+percent+"%");
                    if(curr == 1){
                        $("#canvas1").css('display','none');
                    }
                }
            },
            cropper:true,
            cropperOpts: {
                aspectRatio: 1/1,//截图框的比例
                zoomable:false, //禁用鼠标滚轮放大缩小
                viewMode:1 //截图框只能在图片区域内移动
            }
        },cos)
    });
    //发布人头像
    $(".brand-logo-img3").click(function(){
        $.imgUpload({
            callbackEle:"[name='brandImg'],.brand-logo-img3",
            successCallback:function(path){
                $("i.brand-logo-img3").css('display','none');
                $('.inputImg3').attr("path", path);
            },
            progressCallBack:function(curr){
                console.log('curr',curr);
                if(curr>0){
                    $("#canvas2").css('display','block');
                }
                var canvas = document.getElementById("myCanvas2");
                if(canvas.getContext){
                    var ctx = canvas.getContext("2d");
                    ctx.beginPath();
                    ctx.lineWidth = 5;
                    ctx.lineWidth = 5;//线条宽度
                    var circle = {
                        x : 60,    //圆心的x轴坐标值
                        y : 60,    //圆心的y轴坐标值
                        r : 30      //圆的半径
                    };
                    ctx.strokeStyle ='#32c5d2';
                    ctx.arc(circle.x,circle.y,circle.r,0,2*curr*Math.PI,false);
                    ctx.stroke();
                    var percent = (curr.toFixed(2)*100).toFixed(0);
                    $(".percent").html(""+percent+"%");
                    if(curr == 1){
                        $("#canvas2").css('display','none');
                    }
                }
            },
            cropper:true,
            cropperOpts: {
                aspectRatio: 1 /1,
                autoCropArea:1,
                zoomable:false,
                viewMode:1 //截图框只能在图片区域内移动
            }
        },cos)
    });
</script>
<!--富文本编辑器 -->
<script type="text/javascript" src="../../plugin/kindeditor-4.1.10/kindeditor.js"></script>
<script type="text/javascript" src="../../plugin/kindeditor-4.1.10/lang/zh_CN.js"></script>
<script>

</script>
</body>

</html>

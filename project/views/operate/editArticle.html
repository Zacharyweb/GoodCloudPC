<!DOCTYPE html>
<html lang="en">
<head>
    <title>好云商-后台管理</title>
    @@include("shared/global-meta.html")
    <!-- 引入全局样式 -->
    <!-- 全局样式 -->
    @@include("shared/global-import-css.html")
    <!-- 引入全局插件样式 -->
    <!-- 全局插件样式 -->
    @@include("shared/global-import-plugins-css.html")
    <!-- 全局主题样式 -->
    <link rel="stylesheet" href="../../plugin/pager/css/pager.css">
    <link rel="stylesheet" href="../../plugin/cropper/cropper.min.css">
    <link rel="stylesheet" href="../../css/decorationCollection.css">
</head>
<body class="page-header-fixed page-sidebar-closed-hide-logo page-content-white">
    <div class="page-wrapper">
        <!-- 顶部Bar开始 -->
        @@include("shared/header.html")
        <!-- 顶部Bar结束 -->
        <div class="clearfix"></div>
        <!-- 页面中间部分内容开始 -->
        <div class="page-container">
            <!-- 侧边栏开始 -->
           @@include("shared/operatesliderbar.html")
            <!-- 侧边栏结束 -->
            <!-- 页面主内容开始 -->
            <div class="page-content-wrapper">
                <div class="page-content">
                    <div class="page-bar no-border">
                        <h1 class="page-title bold">装修宝典</h1>
                    </div>
                    <div class="row">
                        <div class="modal-header">
                            <h3 class="bold" style="text-align: center">编辑文章</h3>
                        </div>
                        <div class="modal-body" style="margin-left: 5%">
                                <p class="form-group brand-msg">
                                    <span class="width">
                                        <span class="required" aria-required="true"> *&nbsp;</span>
                                        <span class="span-label">文章标题：&nbsp;&nbsp;</span>
                                    </span>
                                    <input type="text" name="brandName" style="display: inline-block;width:695px;"
                                           class="form-control className1" placeholder="请填写文章标题" >
                                    <span class="red theTitle">文章标题不能为空</span>
                                </p>
                                <p class="form-group brand-msg">
                                    <span class="width">
                                        <span class="required" aria-required="true"> *&nbsp;</span>
                                        <span class="span-label">所属类目：&nbsp;&nbsp;</span>
                                    </span>
                                    <button class="btn gray btn-outline" data-toggle="modal" id="linkSpace" href="#linksToSpace">选择类目</button>
                                    <span class="red theLeiMu">请选择类目</span>
                                </p>
                               <div style="display: inline-block;margin: 0 0 15px 103px;" id="container">

                               </div>
                                <div class="form-group brand-msg">
                                    <span class="width">
                                        <span class="required" aria-required="true"> *&nbsp;</span>
                                        <span class="span-label no-required">配图(大图)：</span>
                                    </span>
                                    <div class="logo-img-wrapper" style="display: inline-block; width: 160px;height: 120px;">
                                        <input type="hidden" class="inputImg" name="img">
                                        <i class="brand-logo-img icon iconfont icon-add imgIcon"></i>
                                        <img class="brand-logo-img bigImg" style="display: inline-block; width: 160px;height: 120px;">
                                    </div>
                                    <span class="red theBigImg">请上传大图</span>
                                    <div id="canvas" class="canvasCss" style="position: absolute; display:none;left: 116px;top: 1px;border:none;">
                                        <canvas id="myCanvas" width="158px" height="118px">
                                            您的浏览器不支持canvas标签。
                                        </canvas>
                                        <span class="percent" style="position: absolute;top: 50px;left: 60px;"></span>
                                    </div>
                                </div>
                            <div class="form-group brand-msg" id="smallImg">
                               <span class="width">
                                    <span class="required" aria-required="true"> *&nbsp;</span>
                                    <span class="span-label no-required">配图(小图)：</span>
                               </span>
                                <div class="logo-img-wrapper container">
                                    <input type="hidden" class="inputImg1" name="img">
                                    <i class="brand-logo-img1 icon iconfont icon-add imgIcon1 icon1"></i>
                                    <img class="brand-logo-img1">
                                </div>
                                <div class="logo-img-wrapper container">
                                    <input type="hidden" class="inputImg2" name="img">
                                    <i class="brand-logo-img2 icon iconfont icon-add imgIcon1 icon2"></i>
                                    <img class="brand-logo-img2">
                                </div>
                                <div class="logo-img-wrapper container">
                                    <input type="hidden" class="inputImg3" name="img">
                                    <i class="brand-logo-img3 icon iconfont icon-add imgIcon1 icon3"></i>
                                    <img class="brand-logo-img3">
                                </div>
                                <div class="logo-img-wrapper container">
                                    <input type="hidden" class="inputImg4" name="img">
                                    <i class="brand-logo-img4 icon iconfont icon-add imgIcon1 icon4"></i>
                                    <img class="brand-logo-img4">
                                </div>
                                <span class="red theSmallImg">请至少上传一张小图</span>
                            </div>
                                <p class="form-group brand-msg">
                                    <p>
                                        <span class="width">
                                            <span style="color:red;"> *&nbsp;</span>
                                            <span class="span-label">描述说明：&nbsp;&nbsp;</span>
                                        </span>
                                        <span class="red theContent">请添加描述说明</span>
                                        <textarea id="description"  name="content"></textarea>

                                    </p>
                                    <p>
                                        <span class="width" style="vertical-align: top">
                                            <span class="span-label">备注：&nbsp;&nbsp;</span>
                                        </span>
                                        <textarea id="remark" rows="8" cols="97" style="margin-left: -5px;"></textarea>
                                    </p>
                                </p>
                           <div style="padding-left:110px;">
                               <button class="btn dark btn-outline" style="margin-right: 20px;" id="back">返回</button>
                               <button class="btn green btn-outline" data-toggle="modal" data-anchor="true" id="save" href="#newBuild">保存</button>
                               <button class="btn green btn-outline" data-toggle="modal" id="keep" href="#newBuild">保存</button>
                           </div>
                        </div>
                        <div class="modal-footer">

                        </div>
                    </div>
                </div>
            </div>
            <!-- 页面主内容结束 -->
        </div>
        <!-- 页面中间内容部分结束 -->
        <!-- 页脚开始 -->
        @@include("shared/footer.html")
        <!-- 页脚结束 -->
    </div>
    <!-- 页面内容结束 -->
    <!--选择类目-->
    <div class="modal fade bs-modal-lg" id="linksToSpace" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title bold">选择并关联二级目录</h4>
                </div>

                <div class="modal-body">
                    <div class="modal-body portlet light bordered">
                        <div id="Header2">

                        </div>
                        <div>
                            <button class="btn green isGuanlian">确认关联</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!--选择类目获取内容-->
    <script id="addLei" type="text/html">
        {{each data as value i}}
        <h3 data-id="{{value.Fid}}">{{value.FTitle}}</h3>
        <div class="container">
            {{each value.list as item i}}
            <button class="btn" title="{{item.Title}}" data-id="{{item.Id}}" value="0">{{item.Title}}</button>
            {{/each}}
        </div>
        {{/each}}
    </script>
    <!--一级类目推荐-->
    <script id="Recommend" type="text/html">
        {{each data as value i}}
        <p class="form-group brand-msg">
            <label class="mt-checkbox mt-checkbox-outline">
                <input type="checkbox" checked data-id="{{value.id}}" value="1">
                <span></span>
            </label>
            <span class="span-label no-required">{{value.title}}：&nbsp;&nbsp;</span>
            <span style="color:red;">【{{value.maxIndexOrder}}】</span>
        </p>
        {{/each}}
    </script>
    <!--选择一级类目-->
    <script id="optionOne" type="text/html">
        {{each data as value i}}
        <option value="{{value.id}}">{{value.title}}</option>
        {{/each}}
    </script>
    <!--选择一级类目-->
    <script id="articleNumber" type="text/html">
            {{data.maxIndexOrder}}
    </script>
  <!-- &lt;!&ndash; 选择类目&ndash;&gt;
    <script id="erJiClass" type="text/html">
        <p data-id="" class="isClose">
            <b style="">{{firstTitle}}</b>
            <i class="thisClose">X</i>
        </p>
    </script>-->
    <!-- 载入全局依赖js -->
<script src="../../assets/global/plugins/jquery.min.js" type="text/javascript"></script>
<script src="../../assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="../../assets/global/scripts/app.min.js" type="text/javascript"></script>
<script src="../../assets/global/plugins/js.cookie.min.js" type="text/javascript"></script>
<script src="../../assets/layouts/layout/scripts/layout.min.js" type="text/javascript"></script>
<script src="../../plugin/artTemplate/template.js"></script>
<script src="../../plugin/draggabilly/draggabilly.pkgd.min.js"></script>
<script src="../../js/config.js"></script>
<script src="../../js/utils.js"></script>
<script src="../../js/jquery.extend.js"></script>
<script src="../../plugin/toastr/toastr.js"></script>
<script src="../../plugin/jquery-validate/jquery.validate.js"></script>
<script src="../../js/common.js"></script>

    <script src="../../js/decorationCollection/editArticle.js"></script>
    <!-- 本页面依赖组件初始化 -->
    <script src="../../plugin/pager/jquery-pager.js"></script>
    <!-- 上传图片脚本 -->
    <script src="../../plugin/qCloud/cos-js-sdk-v4.js"></script>
    <script src="../../plugin/qCloud/crypto.js"></script>
    <script src="../../plugin/qCloud/qCloud.js"></script>
    <script src="../../plugin/upload/cropper.js"></script>
    <script src="../../plugin/upload/qcloud-cropper.js"></script>
    <script>
        //1大
        $(".brand-logo-img").click(function(){
            $.imgUpload({
                callbackEle:"[name='brandImg'],.brand-logo-img",
                successCallback:function(path){
                    $('.inputImg').attr("path",path);
                    $('.imgIcon').css('display','none');
                },
                progressCallBack:function(curr){
                    if(curr>0){
                        $("#canvas").css('display','block');
                        $("#canvas").parent().find('i').css('display','none');
                    }
                    var canvas = document.getElementById("myCanvas");
                    if(canvas.getContext){
                        var ctx = canvas.getContext("2d");
                        ctx.beginPath();
                        ctx.lineWidth = 5;
                        ctx.lineWidth = 5;//线条宽度
                        var circle = {
                            x : 80,    //圆心的x轴坐标值
                            y : 60,    //圆心的y轴坐标值
                            r : 30      //圆的半径
                        };
                        ctx.strokeStyle ='#32c5d2';
                        ctx.arc(circle.x,circle.y,circle.r,0,2*curr*Math.PI,false);
                        ctx.stroke();
                        var percent = (curr.toFixed(2)*100).toFixed(0);
                        $(".percent").html(""+percent+"%");
                        if(curr == 1){
                            $("#canvas").css('display','none');
                        }
                    }
                },
                cropper:true,
                cropperOpts: {
                    aspectRatio: 4/3,//截图框的比例
                    zoomable:false, //禁用鼠标滚轮放大缩小
                    viewMode:1 //截图框只能在图片区域内移动
                }
            },cos)
        });
        //1小
        $(".brand-logo-img1").click(function(){
            $.imgUpload({
                callbackEle:"[name='brandImg'],.brand-logo-img1",
                successCallback:function(path){
                    $('.inputImg1').attr("path",path);
                    $('.icon1').css('display','none');
                },
                cropper:true,
                cropperOpts: {
                    aspectRatio: 4/ 3,//截图框的比例
                    zoomable:false, //禁用鼠标滚轮放大缩小
                    viewMode:1 //截图框只能在图片区域内移动
                }
            },cos)
        })
        $(".brand-logo-img2").click(function(){
            $.imgUpload({
                callbackEle:"[name='brandImg'],.brand-logo-img2",
                successCallback:function(path){
                    $('.inputImg2').attr("path",path);
                    $('.icon2').css('display','none');
                },
                cropper:true,
                cropperOpts: {
                    aspectRatio: 4/ 3,//截图框的比例
                    zoomable:false, //禁用鼠标滚轮放大缩小
                    viewMode:1 //截图框只能在图片区域内移动
                }
            },cos)
        })
        $(".brand-logo-img3").click(function(){
            $.imgUpload({
                callbackEle:"[name='brandImg'],.brand-logo-img3",
                successCallback:function(path){
                    $('.inputImg3').attr("path",path);
                    $('.icon3').css('display','none');
                },
                cropper:true,
                cropperOpts: {
                    aspectRatio: 4/3,//截图框的比例
                    zoomable:false, //禁用鼠标滚轮放大缩小
                    viewMode:1 //截图框只能在图片区域内移动
                }
            },cos)
        })
        $(".brand-logo-img4").click(function(){
            $.imgUpload({
                callbackEle:"[name='brandImg'],.brand-logo-img4",
                successCallback:function(path){
                    $('.inputImg4').attr("path",path);
                    $('.icon4').css('display','none');
                },
                cropper:true,
                cropperOpts: {
                    aspectRatio: 4/3,//截图框的比例
                    zoomable:false, //禁用鼠标滚轮放大缩小
                    viewMode:1 //截图框只能在图片区域内移动
                }
            },cos)
        });
        $(".img").click(function(){
            $.imgUpload({
                callbackEle:"[data-name='img'],.img",
                successCallback:function(path){
                },
                cropper:true,
                cropperOpts: {
                    aspectRatio: 4/3,//截图框的比例
                    zoomable:false, //禁用鼠标滚轮放大缩小
                    viewMode:1 //截图框只能在图片区域内移动
                }
            },cos)
        })
    </script>
    <!--富文本编辑器 -->
    <script type="text/javascript" src="../../plugin/kindeditor-4.1.10/kindeditor.js"></script>
    <script type="text/javascript" src="../../plugin/kindeditor-4.1.10/lang/zh_CN.js"></script>
    <script>
        //页面页码模块
        var editArticle =new EditArticle();
        editArticle.create();
    </script>
</body>

</html>

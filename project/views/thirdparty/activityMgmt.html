<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>好云商-后台管理</title>
    @@include("shared/global-meta.html")
    <!-- 引入全局样式 -->
    @@include("shared/global-import-css.html")
   <!-- 引入全局样式 -->
    <!-- 引入全局插件样式 -->
   <!-- 引入全局插件样式 -->
    @@include("shared/global-import-plugins-css.html")
    <!-- 引入自定义公共样式 -->
    <link rel="stylesheet" href="../../css/base.css">
    <link rel="stylesheet" href="../../plugin/pager/css/pager.css">
<!--    <link rel="stylesheet" href="../assets/custom/css/common.css">
    <link rel="stylesheet" href="../assets/custom/css/layout.css">
    <link rel="stylesheet" href="../assets/custom/css/custom-modal.css">
    <link rel="stylesheet" href="../assets/custom/page/thirdPartyBg/activityMgmt/css/page.css">-->
    <link rel="stylesheet" href="../../plugin/datetimerpicker/jquery.datetimepicker.css">
<style>
    .xdsoft_datetimepicker{ z-index: 10050;}
</style>

</head>
<body class="page-header-fixed page-sidebar-closed-hide-logo page-content-white">
    <div class="page-wrapper">
        <!-- 顶部Bar开始 -->
         @@include("shared/header.html",{ "username":"NickName" })
        <!-- 顶部Bar结束 -->
        <div class="clearfix"></div>
        <!-- 页面中间部分内容开始 -->
        <div class="page-container">
            <!-- 侧边栏开始 -->
                @@include("shared/thirdPartysliderbar.html")
            <!-- 侧边栏结束 -->
            <!-- 页面主内容开始 -->
            <div class="page-content-wrapper">
                <div class="page-content">
                    <!-- 页面主内容头部开始-->
                    <!-- 页面主标题开始-->
                    <div class="page-bar no-border">
                        <h1 class="page-title bold">活动管理</h1>
                    </div>
                    <!-- 页面主标题结束-->
                    <!-- 页面主内容头部结束-->
                    <!-- 活动查询框开始 -->
                    <form  role="form" class="row m-heading-1 border-default m-bordered" id="SearchForm">
                        <div class="col-sm-5 col-xs-6">
                            <div class="input-group  date-picker input-daterange col-xs-12">
                                <input type="text" class="form-control" name="relBeginTime" placeholder="起始日期">
                                <span class="input-group-addon"> 至 </span>
                                <input type="text" class="form-control" name="relEndTime" placeholder="结束日期">
                            </div>
                        </div>
                        <div class="col-sm-2 hidden-xs">
                            <input id="bootstrap-input-sm" class="form-control input-sm" name="name" placeholder="活动主题">
                        </div>
                        <div class="col-sm-2 hidden-xs">
                            <input class="form-control input-sm" name="address" placeholder="活动地点">
                        </div>
                        <div class="col-sm-2 col-xs-4">
                            <select id="select2-single-input-sm" class="form-control input-sm select2-multiple select2-hidden-accessible" tabindex="-1" aria-hidden="true" name="status">
                                <option value="-1">选择状态</option>
                                <option value="0">进行中</option>
                                <option value="1">已暂停</option>
                                <option value="2">已结束</option>
                                <option value="3">已终止</option>
                            </select>
                        </div>
                        <div class="btn-group btn-group-devided col-sm-1 col-xs-2" data-toggle="buttons">
                            <button type="button" class="btn dark btn-outline pull-right" id="searchBtn"><i class="fa fa-search"></i>&nbsp;查询</button>
                        </div>
                    </form>
                    <!-- 活动查询框结束 -->
                    <div class="row">
                        <div class="col-md-12">
                            <!-- 表格开始-->
                            <div class="portlet light bordered">
                                <div class="portlet-title">
                                    <div class="caption font-dark">
                                        <i class="icon-settings font-dark"></i>
                                        <span class="caption-subject bold">活动列表</span>
                                    </div>
                                    <div class="actions">
                                        <div class="btn-group btn-group-devided" data-toggle="buttons">
                                            <a id="createActivity" class=" btn dark  sbold btn-custom-lg" href="#singleOptionModal" role="button" data-toggle="modal"  id="createActivity">
                                              <i class="fa fa-plus"></i>&nbsp;创建活动 
                                            </a>

                                        </div>
                                    </div>
                                </div>
                                <div class="portlet-body">
                                    <table class="table table-striped table-bordered table-hover table-header-fixed" id="activityMgmtTable">
                                        <thead>
                                            <tr class="table-header">
                                                <th>序号</th>
                                                <th>微信扫码，进入活动</th>
                                                <th>活动爆破期</th>
                                                <th>活动主题</th>
                                                <th>活动地点</th>
                                                <th>任务进度</th>
                                                <th>状态</th>
                                                <th>备注</th>
                                                <th>创建时间</th>
                                                <th>操作</th>
                                            </tr>
                                        </thead>
                                        <tbody>

                                        </tbody>
                                    </table>
                                    <div class="row">
                                        <span id="pager" class="pager pull-right">
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <!-- 表格结束 -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- 页面主内容结束 -->
        </div>
        <!-- 页面中间内容部分结束 -->
        <!-- 页脚开始 -->
         @@include("shared/footer.html")
        <!-- 页脚结束 -->
    </div>
    <!-- 页面内容结束 -->
    <!-- 其他组件载入开始 -->
    <!-- 模态框表单部分开始 -->

    <div class="modal fade" id="singleOptionModal" tabindex="-1" role="basic" aria-hidden="true" style="display: none;">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header ui-draggable-handle">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title">添加品类</h4>
                </div>
                <div class="modal-body">

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn dark btn-outline" data-dismiss="modal">关闭</button>
                    <button type="button" id="saveCategory" class="btn green">保存</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
<!-- 模态框表单部分结束 -->

    <!-- 其他组件载入结束-->
    <!-- 载入全局依赖js -->
    <!-- 全局依赖js -->
    @@include("shared/global-import-js.html")
    <script id="activityMgmtTmpl" type="text/html">
        {{each data as value i}}
        <tr activityId={{value.id}}>
            <td class="table-td-index">{{value.id}}</td>
            <td class="table-td-QCcode"> <img src="{{value.qrShowUrl}}"> </td>
            <td>{{value.relBeginTime}}~{{value.relEndTime}}</td>
            <td>{{value.name}}</td>
            <td>{{value.address}}</td>
            <td>还有<span>5个</span>任务未完成</td>
            <td>{{value.statusDesc}}</td>
            <td>{{value.remark}}</td>
            <td>{{value.createTime}}</td>
            <td style="min-width: 205px;">
                <a data-id="{{value.id}}" data-func="enterTask" href="InterfaceDesign.html?id={{value.id}}">进入活动任务</a>
                {{if value.status==1}}
                    <a data-func="repause" href="javascript:void(0);">恢复</a>
                    <a style="display: none" data-func="pause" href="javascript:void(0);">暂停</a>
                {{else}}
                    <a data-func="repause" style="display: none" href="javascript:void(0);">恢复</a>
                    <a data-func="pause" href="javascript:void(0);">暂停</a>
                {{/if}}
                <a data-func="edit" href="javascript:void(0);">编辑</a>
                <a data-func="delete" href="javascript:void(0);">删除</a>
            </td>
        </tr>
        {{/each}}
    </script>
    <script id="createModelTmpl" type="text/html">
        <form class="form-horizontal form-row-seperated" id="addForm">
            <div class="form-body">
                <div class="form-group">
                    <label class="control-label col-md-3">
                        <span class="required-icon">*</span>&nbsp;
                        联盟活动主题：
                    </label>
                    <div class="col-md-9">
                        <input type="text" placeholder="本次活动主题，最多30字" name="name" form-data="name" class="form-control" required>
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-md-3">
                        <span class="required-icon">*</span>&nbsp;
                        爆破时间段：
                    </label>
                    <div class="col-md-9">
                        <div class="col-md-5 no-padding" >
                            <div class="input-group date form_datetime">
                                <input type="text" size="16" readonly="" class="form-control" name="relBeginTime" form-data="relBeginTime" placeholder="起始时间" required>
                                <span class="input-group-btn">
                                    <button class="btn default date-set display-none" type="button">
                                        <i class="fa fa-calendar"></i>
                                    </button>
                                </span>
                            </div>
                        </div>
                        <span class="col-md-2 no-padding text-center" style="line-height: 34px;">至</span>
                        <div class="col-md-5 no-padding">
                            <div class="input-group date form_datetime">
                                <input type="text" size="16" readonly="" class="form-control" name="relEndTime" form-data="relEndTime" placeholder="结束时间" required>
                                <span class="input-group-btn">
                                    <button class="date-set display-none" type="button">
                                    </button>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-md-3">
                        <span class="required-icon">*</span>&nbsp;
                        活动地点：
                    </label>
                    <div class="col-md-9">
                        <input type="text" class="form-control" name="address" form-data="address" placeholder="活动地点" required>
                        <input type="hidden" name="x" form-data="x">
                        <input type="hidden" name="y" form-data="y">
                        <div id="allmap" style=" width:100%; height:200px; margin-top: 20px;"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-md-3">
                        <span class="required-icon">*</span>&nbsp;
                        主办方联系人：
                    </label>
                    <div class="col-md-9">
                        <input type="text" placeholder="联系人姓名" name="contact" form-data="contact" class="form-control" required>
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-md-3">
                        <span class="required-icon">*</span>&nbsp;
                        主办方手机号：
                    </label>
                    <div class="col-md-9">
                        <input type="text" placeholder="手机号" name="tel" form-data="tel" class="form-control" required>
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-md-3">备注：</label>
                    <div class="col-md-9">
                        <textarea class="form-control" rows="3" name="remark" form-data="remark" placeholder="备注事项"></textarea>
                    </div>
                </div>
            </div>
        </form>
    </script>
    <!-- 本页面依赖组件初始化 -->
    <script src="../../plugin/artTemplate/template.js"></script>
    <script src="../../plugin/pager/jquery-pager.js"></script>
    <script src="../../plugin/datetimerpicker/jquery.datetimepicker.js"></script>
    <script type="text/javascript" src="https://api.map.baidu.com/api?v=2.0&ak=NI85IBD7Gwtu9RNGbfAfjBsWvyChHDLF"></script>
    <script src="../../js/activityMgmtForThirdparty/createActivity.js"></script>
    <script src="../../js/activityMgmtForThirdparty/activityMgmt.js"></script>
    <script type="text/javascript" src="../../plugin/jquery-validate/jquery.validate.js"></script>
    <!--<script type="text/javascript" src="../../plugin/jquery-validate/jquery.validate.message.js"></script>-->
    <script type="text/javascript" src="../../plugin/jquery-validate/localization/messages_zh.js"></script>

    <script type="text/javascript">
        $(function(){
            var activityMgmt =new ActivityMgmt();
            activityMgmt.create({pattern:$.getUrlParam("pattern")});
        })
    </script>
</body>
</html>